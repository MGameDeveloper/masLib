///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include "mas_ecs.h"


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
typedef union mas_vec3
{
	float xyz[3];
	struct
	{
		float x, y, z;
	};
} mas_velocity, mas_position, mas_rotation, mas_scale;

typedef union mas_matrix
{
	float m16[16];
};


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include <string.h>

void mas_register_structs()
{
	mas_struct(mas_vec3,
		mas_member(float, x),
		mas_member(float, y),
		mas_member(float, z));

	mas_struct(mas_velocity,
		mas_member(float, x),
		mas_member(float, y),
		mas_member(float, z));

	mas_struct(mas_position,
		mas_member(float, x),
		mas_member(float, y),
		mas_member(float, z));

	mas_struct(mas_rotation,
		mas_member(float, x),
		mas_member(float, y),
		mas_member(float, z));

	mas_struct(mas_scale,
		mas_member(float, x),
		mas_member(float, y),
		mas_member(float, z));

	mas_struct(mas_matrix,
		mas_member(float, m16[16]));


	mas_struct_registery_print();
	// mas_struct_commit_records(); REQUIRE: db_file

	const char* nlist[] = { "mas_position", "mas_rotation", "mas_scale", "mas_matrix" };
	const uint32_t nlist_count = sizeof(nlist) / sizeof(nlist[0]);
	uint32_t nids[nlist_count] = { };
	if (!mas_struct_find_structs(nlist, nids, nlist_count))
	{
		int w = 0;
	}
}


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
int main(int argc, const char* argv[])
{
	if (!mas_ecs_init())
		return -1;

	mas_register_structs();

	while (1)
	{
		mas_ecs_update();
	}

	mas_ecs_deinit();

	return 0;
}